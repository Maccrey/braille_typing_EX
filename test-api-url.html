<!DOCTYPE html>
<html>
<head>
    <title>API URL Test</title>
</head>
<body>
    <h1>API URL Test</h1>
    <div id="results"></div>

    <script>
        function getApiBaseUrl() {
            // For development (localhost)
            if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
                return 'http://localhost:3001';
            }

            // For file:// protocol (opening HTML files directly) - use production server
            if (window.location.protocol === 'file:') {
                return 'https://typing.maccrey.com';
            }

            // For production - use the same domain
            return window.location.origin;
        }

        const results = document.getElementById('results');
        results.innerHTML = `
            <p><strong>Current Location:</strong></p>
            <p>Protocol: ${window.location.protocol}</p>
            <p>Hostname: ${window.location.hostname}</p>
            <p>Origin: ${window.location.origin}</p>
            <p><strong>API Base URL:</strong> ${getApiBaseUrl()}</p>
            <p><strong>Full API URL:</strong> ${getApiBaseUrl()}/api</p>
        `;

        // Test API call
        fetch(getApiBaseUrl() + '/health')
            .then(response => response.json())
            .then(data => {
                results.innerHTML += `<p><strong>Health Check:</strong> ✅ ${data.status}</p>`;
            })
            .catch(error => {
                results.innerHTML += `<p><strong>Health Check:</strong> ❌ ${error.message}</p>`;
            });
    </script>
</body>
</html>